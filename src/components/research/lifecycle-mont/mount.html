<!doctype html>
<html>
  <body>
    <div id="app"></div>
  </body>
  <script>
    const container = document.getElementById('app')
    const vdom = h('div', { class: 'container' }, [
      h('h1', {}, 'Lifecycle Mount'),
      h('p', {}, 'This is a simple mount example.'),
      h('button', { id: 'mountButton' }, 'Mount Component'),
    ])
    mount(vdom, container)

    // h 函数用于创建虚拟 DOM 节点
    // 为什么叫 h?
    // `HTML` 全称是 `hyper-text markup language`
    // 那么生成 `HTML` 的脚本就可以称为 `HTML structures generated by script`
    // 即 `Hyperscript` , 缩写为 `h`
    // 参考 https://github.com/vuejs/babel-plugin-transform-vue-jsx/issues/6#issuecomment-232994673
    function h(tag, props, children) {
      return {
        tag,
        props,
        children,
      }
    }

    // mount 函数用于将虚拟 DOM 挂载到真实 DOM 上
    function mount(vnode, container) {
      // 根据虚拟节点创建真实 DOM 元素
      const el = document.createElement(vnode.tag)
      if (vnode.props) {
        for (const key in vnode.props) {
          const value = vnode.props[key]
          el.setAttribute(key, value)
        }
      }
      if (vnode.children) {
        if (typeof vnode.children === 'string') {
          el.textContent = vnode.children
        } else {
          vnode.children.forEach((child) => {
            mount(child, el)
          })
        }
      }
      container.appendChild(el)
    }
  </script>
</html>
